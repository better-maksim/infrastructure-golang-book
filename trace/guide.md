### 为什么需要链路追踪

我们来通过两个具体的两个场景，来看一看为什么需要链路追踪。

#### 场景一

在传统开发模式当中是本地函数进行调用，如果发生错误我们可以通过打日志的形式进行错误分析。

但是如果是一个分布式系统，也就是微服务中，那就会变得非常麻烦。

当我们非常复杂的分布式系统时，将会拆分大量的服务，进行互相调用，如下图：

![Paste_Image.png](https://upload-images.jianshu.io/upload_images/2279594-dd72907e82f89fd6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600)



现在某一个接口出现异常，首先要找的是谁？



A 如果是小美在负责，那么问题来了，小美会查看自己的日志，因为有可能是她写的地方出错了，或者是其他人写的代码有问题，然后她发现，发现服务 C 出错了。

他就需要去找服务 C 的负责人小帅，小帅就介入进来了，小帅也要重复上面的动作，看看是谁的问题。

如果服务多的话，那么问题排查就会变得很慢，因为一个人一个人的问，效率肯定是要低的。



如果服务是下面这样的结构，那么久只能求佛祖保佑了。

![Paste_Image.png](https://upload-images.jianshu.io/upload_images/2279594-4b7d1b6abe595390.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/600)

#### 场景二

测试发现了这个接口响应很慢，可能是一个列表接口，需要消耗 5 秒中的时间才能够获取到内容，整个过程当中，到底是谁慢了，如果忘记打印日志了，那基本上还需要重新更改代码在进行上线调试，同时排查问题的步骤跟上面的场景是一样的，那么同样意味着效率的降低。





#### 怎么解决这样的问题



**打日志！！！！**但是这个日志是打在本地了，是无法看出来是哪个服务慢了，咱本地只有自己能看得懂，这里面面临着日志查询的效率是很低的，即使是 ELK 查询效率也不高，因为看的都是日志，不过是换了一个地方进行存储而已，无法看出来哪个接口慢，在分布式系统当中，所以说排查问题的效率就变成了一个刚需。

我们就需要将日志打到一个第三方系统，首先这个第三方系统需要有一个 web 页面，页面中能够直接展示我的调用链，对于每一个请求没一个步骤时间是多少，哪一步慢了，就能解决上述的问题。

**这就是链路追踪。**